(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(21)},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(10),s=a.n(i),r=a(7),l=a(8),o=a(2),u=a(3),m=a(5),d=a(4),h=a(6),p=a(1);var v=function(e){var t=e.rating,a=void 0===t?0:t,n=e.color,i=void 0===n?"orange":n,s=Math.ceil(a);return[1,2,3,4,5].map(function(e,t){return c.a.createElement("span",{key:""+t,className:"fa fa-star",style:{color:t<s?i:"silver"}})})},b=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=void 0===t?"":t,n=e.subtitle,i=void 0===n?"":n,s=e.thumbnail,r=void 0===s?"":s,l=e.price,o=void 0===l?"":l,u=e.rating,m=void 0===u?0:u,d=e.authors,h=void 0===d?[]:d;return c.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-6 col-lg-4"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-inner row"},c.a.createElement("div",{className:"col-xs-4 col-sm-4 col-md-4 col-lg-4"},c.a.createElement("div",{className:"card-image-container"},r?c.a.createElement("img",{src:r,alt:a,className:"thumbnail"}):c.a.createElement("div",{className:"placeholder"},c.a.createElement("span",{className:"fa fa-book default-icon"})))),c.a.createElement("div",{className:"col-xs-8 col-sm-8 col-md-8 col-lg-8 card-text-container"},c.a.createElement("h4",{className:"title"},a),h.length>0?c.a.createElement("p",{className:"authors"},"By ",h.join(", ")):null,o&&c.a.createElement("p",{className:"price"},"\u20b9 ",o),m?c.a.createElement(v,{rating:m}):null,c.a.createElement("div",{className:"block-with-text"},i)))))}}]),t}(n.PureComponent);var f=function(){return c.a.createElement("div",{className:"sk-cube-grid"},c.a.createElement("div",{className:"sk-cube sk-cube1"}),c.a.createElement("div",{className:"sk-cube sk-cube2"}),c.a.createElement("div",{className:"sk-cube sk-cube3"}),c.a.createElement("div",{className:"sk-cube sk-cube4"}),c.a.createElement("div",{className:"sk-cube sk-cube5"}),c.a.createElement("div",{className:"sk-cube sk-cube6"}),c.a.createElement("div",{className:"sk-cube sk-cube7"}),c.a.createElement("div",{className:"sk-cube sk-cube8"}),c.a.createElement("div",{className:"sk-cube sk-cube9"}))},E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={query:e.query},a._onChange=a._onChange.bind(Object(p.a)(Object(p.a)(a))),a._onSubmit=a._onSubmit.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"_onSubmit",value:function(e){var t=this.state.query;"function"===typeof this.props.onSearch&&this.props.onSearch(t),e.preventDefault()}},{key:"_onChange",value:function(e){this.setState({query:e.target.value})}},{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this._onSubmit,autoComplete:"off",className:"row"},c.a.createElement("div",{className:"col-xs-2 col-md-1 col-lg-1"},c.a.createElement("div",{className:"searchIcon-container"},c.a.createElement("span",{className:"fa fa-search searchIcon"}))),c.a.createElement("div",{className:"col-xs-10 col-md-11 col-lg-11"},c.a.createElement("input",{className:"searchbox",type:"text",name:"search",placeholder:"Search books and more...",onChange:this._onChange,autoComplete:"off",value:this.state.query})))}}]),t}(n.Component);var k=function(e){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"text-box"},c.a.createElement("h1",{className:"heading-primary"},c.a.createElement("span",{className:"heading-primary-main"},"The Book Store"),c.a.createElement("span",{className:"heading-primary-sub"},"Ultimate destination for a Bookworm"))),c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("div",{className:"searchbox-container"},c.a.createElement(E,e))))},g=a(11);function N(e){var t=e.name,a=void 0===t?"":t,n=e.selected,i=void 0===n?"":n,s=e.type;return c.a.createElement("div",{className:"filter-item",onClick:function(){return e.onFilterUpdate(a,s)}},c.a.createElement("span",{className:"filter-item-icon"},c.a.createElement("span",{className:i===a?"fa fa-check-square":"fa fa-square-o"})),c.a.createElement("span",{className:"filter-item-text"},a))}var y=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.items,n=void 0===a?"":a,i=t.type,s=void 0===i?"":i,r=t.selected,l=void 0===r?"":r,o=t.activeFilter,u=void 0===o?"":o,m=Object(g.a)(t,["items","type","selected","activeFilter"]),d=u===s;return c.a.createElement("div",{className:"filter ".concat(d?"filter-active":"")},c.a.createElement("div",{className:"filter-item ".concat(d?"filter-header-active":""),onClick:function(){return e.props.updateActiveFilter(s)}},c.a.createElement("span",{className:"filter-item-text"},c.a.createElement("b",null,s)),c.a.createElement("span",{className:"filter-item-icon",style:{float:"right"}},c.a.createElement("span",{className:"fa fa-angle-down"}))),d&&n.map(function(e,t){return c.a.createElement(N,Object.assign({key:""+t,name:e,type:s,selected:l},m))}))}}]),t}(n.Component);function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t.forEach(function(t){(t=t.toLowerCase())&&-1===e.authors.indexOf(t)&&e.authors.push(t)}),a.forEach(function(t){(t=t.toLowerCase())&&-1===e.categories.indexOf(t)&&e.categories.push(t)}),(n=n.toLowerCase())&&-1===e.publishers.indexOf(n)&&e.publishers.push(n)}a(18),a(19);var O={selectedauthor:"",selectedcategory:"",selectedpublisher:""},F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state=Object(l.a)({books:[],loading:!1,query:"react js",filters:{authors:[],publishers:[],categories:[]}},O,{activeFilter:"author",popup:!1}),a.fetchData=a.fetchData.bind(Object(p.a)(Object(p.a)(a))),a.onScroll=a.onScroll.bind(Object(p.a)(Object(p.a)(a))),a.onSearch=a.onSearch.bind(Object(p.a)(Object(p.a)(a))),a.onFilterUpdate=a.onFilterUpdate.bind(Object(p.a)(Object(p.a)(a))),a.clearFilters=a.clearFilters.bind(Object(p.a)(Object(p.a)(a))),a.updateActiveFilter=a.updateActiveFilter.bind(Object(p.a)(Object(p.a)(a))),a.showHideFilters=a.showHideFilters.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"fetchData",value:function(){var e=this,t=e.state.books,a=e.state.query,n=e.state.filters,c=t.length,i=a.replace(/^\s+|\s+$|\s+(?=\s)/g,"").split(" ").join("+"),s="https://www.googleapis.com/books/v1/volumes?q=".concat(i,"&startIndex=").concat(c+1);fetch(s).then(function(e){return e.json()}).then(function(a){var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{authors:[],publishers:[],categories:[]},a=[],n=e&&e.items&&e.items||[],c=n.length,i=t;if(c)for(var s=0;s<c;s++){var r=n[s],l="",o=r.volumeInfo,u=void 0===o?{}:o,m=r.saleInfo,d=void 0===m?{}:m,h=r.id,p=void 0===h?"":h,v=u.authors||[],b=u.categories||[],f=u.publisher||"";r.volumeInfo.imageLinks&&(l="https://books.google.com/books/content/images/frontcover/".concat(p,"?fife=w400-h600")),j(i,v,b,f),a.push({title:u.title,subtitle:u.subtitle||u.description||"",thumbnail:l,price:d&&d.retailPrice&&d.retailPrice.amount,buyLink:d&&d.buyLink,id:p,rating:u.averageRating||0,authors:u.authors||[]})}return{books:a,filters:i}}(a,n);c&&c.books.length&&e.setState({books:[].concat(t,c.books),loading:!1,filters:c.filters})})}},{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0},function(){e.fetchData(),window.addEventListener("scroll",this.onScroll)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll")}},{key:"onSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this;e.length&&t.setState(Object(l.a)({query:e,books:[],filters:{authors:[],publishers:[],categories:[]}},O),function(){t.fetchData()})}},{key:"onScroll",value:function(){window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight&&!1===this.state.loading&&this.fetchData()}},{key:"onFilterUpdate",value:function(e,t){this.setState(Object(r.a)({},"selected"+t,e))}},{key:"clearFilters",value:function(){this.setState(Object(l.a)({},O))}},{key:"updateActiveFilter",value:function(e){this.setState({activeFilter:e})}},{key:"showHideFilters",value:function(){this.setState({popup:!this.state.popup})}},{key:"render",value:function(){var e=this.state.books||[],t=this.state.query||"",a=this.state||{},n=a.filters,i=void 0===n?{}:n,s=a.selectedauthor,r=void 0===s?"":s,l=a.selectedpublisher,o=void 0===l?"":l,u=a.selectedcategory,m=void 0===u?"":u;return c.a.createElement("div",null,this.state.popup?c.a.createElement("div",{className:"popup"},c.a.createElement("div",{className:"popup-content"},c.a.createElement("div",{className:"popup-header"},c.a.createElement("span",null,"Filters"),c.a.createElement("span",{className:"popup-header-button",onClick:this.clearFilters},c.a.createElement("span",{className:"fa fa-trash"})," Clear All")),c.a.createElement(y,{items:i.authors,type:"author",selected:r,onFilterUpdate:this.onFilterUpdate,active:!0,updateActiveFilter:this.updateActiveFilter,activeFilter:this.state.activeFilter}),c.a.createElement(y,{items:i.publishers,type:"publisher",selected:o,onFilterUpdate:this.onFilterUpdate,updateActiveFilter:this.updateActiveFilter,activeFilter:this.state.activeFilter}),c.a.createElement(y,{items:i.categories,type:"category",selected:m,onFilterUpdate:this.onFilterUpdate,updateActiveFilter:this.updateActiveFilter,activeFilter:this.state.activeFilter}),c.a.createElement("div",{className:"done-button",onClick:this.showHideFilters},"Done"))):null,c.a.createElement(k,{query:t,onSearch:this.onSearch}),c.a.createElement("div",{className:"bookstore"},c.a.createElement("div",{className:"applied-filters"},[t,r,m,o].map(function(e,t){return e?c.a.createElement("span",{className:"chip"},e):null}),c.a.createElement("span",{className:"chip",onClick:this.showHideFilters},c.a.createElement("span",{className:"fa fa-filter"})," Refine Search")),c.a.createElement("div",{className:"row "},e.map(function(e,t){return c.a.createElement(b,{key:e.id+"-"+t,title:e.title,subtitle:e.subtitle,thumbnail:e.thumbnail,price:e.price,rating:e.rating,buyLink:e.buyLink,authors:e.authors})})),c.a.createElement(f,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(20);s.a.render(c.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,1,2]]]);
//# sourceMappingURL=main.a10c00f5.chunk.js.map